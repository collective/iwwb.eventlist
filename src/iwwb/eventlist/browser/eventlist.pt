<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="iwwb.eventlist">
<body>

<metal:main fill-slot="main">
  <metal:main define-macro="main">

    <h1 class="documentFirstHeading" i18n:translate="">
      List events
    </h1>

    <div id="listevents-form">
        <form tal:replace="structure view/form_wrapper" />
    </div>

    <div class="visualClear"></div>
    
    <h2 i18n:translate="">
      Results
    </h2>
    
    <tal:results tal:define="events options/events">
        <ul id="results" tal:condition="events"
            tal:define="Batch python:modules['Products.CMFPlone'].Batch;
                        b_size python:30; b_size request/b_size | b_size;
                        b_start python:0;b_start request/b_start | b_start;
                        batch python:Batch(events, b_size, int(b_start), orphan=1);">
            <li class="result-item" tal:repeat="event batch">
                <div class="result-item-field">
                    <b i18n:translate="">Title:</b>
                    <span tal:content="event/Title"/>
                </div>
                <div class="result-item-field">
                    <b i18n:translate="">Type:</b>
                    <span tal:content="python: view.get_event_type(event.Type)"/>
                 </div>
                <div class="result-item-field">
                    <b i18n:translate="">City:</b>
                    <span tal:content="event/City|nothing" />
                 </div>
                <div class="result-item-field">
                    <b i18n:translate="">Start date:</b>
                    <span tal:content="event/StartTime|nothing"/>
                 </div>
                <div class="result-item-field">
                    <b i18n:translate="">Training Supplier:</b>
                    <a tal:content="event/TrainingSupplier|nothing"
                       tal:attributes="href event/TrainingSupplierUrl|nothing">
                       Training Supplier
                    </a>
                 </div>
                <div class="result-item-field">
                    <b i18n:translate="">Database Supplier:</b>
                    <a tal:content="event/DatabaseSupplier|nothing"
                       tal:attributes="href event/DatabaseSupplierURL|nothing">
                       Database Supplier
                    </a>
                </div>
            </li>
            <div metal:use-macro="context/batch_macros/macros/navigation" />
        </ul>
        <p tal:condition="python: not events" i18n:translate="">
            There are no results to display.
        </p>
    </tal:results>
  </metal:main>
</metal:main>

</body>
</html>
